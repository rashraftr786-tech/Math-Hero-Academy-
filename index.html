<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Grade 3 Math - PS Pethgam Wagoora</title>
    <style>
        :root {
            --sky: #00d2ff; --grass: #3a7bd5; --pink: #ff4081;
            --gold: #FFD700; --white: #ffffff;
        }
        body, html { margin: 0; padding: 0; height: 100%; width: 100%; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; overflow: hidden; }
        #app-shell { display: flex; flex-direction: column; height: 100vh; width: 100vw; transition: background 0.5s; }
        
        /* THEMES */
        .theme-home { background: #6a11cb; background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%); }
        .theme-addition { background: #11998e; background: linear-gradient(to bottom, #38ef7d, #11998e); }
        .theme-subtraction { background: #f12711; background: linear-gradient(to bottom, #f5af19, #f12711); }
        .theme-multiplication { background: #8e2de2; background: linear-gradient(to bottom, #4a00e0, #8e2de2); }
        .theme-division { background: #00c6ff; background: linear-gradient(to bottom, #0072ff, #00c6ff); }

        /* HUD & SCREENS */
        .header { background: rgba(255,255,255,0.9); padding: 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 4px solid rgba(0,0,0,0.1); }
        .screen { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        .hidden { display: none !important; }

        /* MENU BUTTONS */
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; width: 100%; max-width: 500px; }
        .menu-btn { height: 120px; border: none; border-radius: 20px; color: white; font-size: 1.3rem; font-weight: bold; cursor: pointer; box-shadow: 0 8px 0 rgba(0,0,0,0.2); }
        .btn-add { background: #ff4081; } .btn-sub { background: #ff9800; }
        .btn-mul { background: #9c27b0; } .btn-div { background: #00bcd4; }

        /* GRADE 3 QUESTION CARD */
        .card { background: var(--white); border-radius: 30px; padding: 30px; width: 85%; max-width: 400px; text-align: center; box-shadow: 0 15px 35px rgba(0,0,0,0.2); border-top: 10px solid var(--pink); }
        .math-problem { font-size: 3.5rem; font-weight: 900; margin: 20px 0; letter-spacing: 5px; color: #2c3e50; }
        
        /* NUMPAD */
        .numpad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 20px; width: 100%; }
        .key { padding: 15px; font-size: 1.5rem; background: #f8f9fa; border: 2px solid #dee2e6; border-radius: 12px; cursor: pointer; font-weight: bold; }
        .key:active { background: #e2e6ea; transform: scale(0.95); }
        .submit-btn { grid-column: span 3; padding: 20px; background: #28a745; color: white; border: none; border-radius: 12px; font-size: 1.5rem; font-weight: bold; margin-top: 10px; cursor: pointer; }

        /* OVERLAYS */
        .popup { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.85); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 100; color: white; }
        .footer { background: white; padding: 10px; text-align: center; font-size: 0.9rem; }
    </style>
</head>
<body class="theme-home">

<div id="app-shell">
    <header class="header">
        <div style="font-size: 1.5rem;">‚≠ê Stars: <span id="star-val">0</span></div>
        <button onclick="navHome()" style="padding: 10px 20px; border-radius: 10px; border: 1px solid #ccc; font-weight: bold;">üè† Home</button>
    </header>

    <section id="scr-home" class="screen">
        <h1 style="color:white; text-align: center; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">Math Adventure World<br><small>PS Pethgam Wagoora</small></h1>
        <div class="menu-grid">
            <button class="menu-btn btn-add" onclick="initGame('addition')">‚ûï Addition<br>(Carry-over)</button>
            <button class="menu-btn btn-sub" onclick="initGame('subtraction')">‚ûñ Subtraction<br>(Borrowing)</button>
            <button class="menu-btn btn-mul" onclick="initGame('multiplication')">‚úñ Multiplication<br>(Grade 3)</button>
            <button class="menu-btn btn-div" onclick="initGame('division')">‚ûó Division<br>(Grade 3)</button>
        </div>
    </section>

    <section id="scr-game" class="screen hidden">
        <div class="card">
            <div id="level-label" style="color: #666; font-weight: bold;">LEVEL 1</div>
            <div id="problem-text" class="math-problem">24 + 18</div>
            <input type="text" id="ans-input" readonly placeholder="?" style="width: 100%; height: 60px; font-size: 2.5rem; text-align: center; border: 2px solid #ddd; border-radius: 10px; color: var(--pink);">
            
            <div class="numpad">
                <button class="key" onclick="press(1)">1</button><button class="key" onclick="press(2)">2</button><button class="key" onclick="press(3)">3</button>
                <button class="key" onclick="press(4)">4</button><button class="key" onclick="press(5)">5</button><button class="key" onclick="press(6)">6</button>
                <button class="key" onclick="press(7)">7</button><button class="key" onclick="press(8)">8</button><button class="key" onclick="press(9)">9</button>
                <button class="key" style="background:#ffc107" onclick="press('C')">C</button><button class="key" onclick="press(0)">0</button>
                <button class="submit-btn" onclick="verify()">SUBMIT ANSWER ‚úÖ</button>
            </div>
        </div>
    </section>

    <footer class="footer">
        Designed & Developed by <strong>Mohammad Ashraf Rather</strong> | Teacher, PS Pethgam Wagoora
    </footer>
</div>

<div id="win-overlay" class="popup hidden">
    <h1 style="font-size: 5rem;">üèÜ</h1>
    <h1>Excellent!</h1>
    <p style="font-size: 1.2rem;">That's correct 3rd Grade logic!</p>
    <button onclick="nextLevel()" style="padding: 20px 50px; background: #28a745; color: white; border: none; border-radius: 20px; font-size: 1.5rem; cursor: pointer;">Play Next Level ‚ûî</button>
</div>

<script>
    let gState = { stars: 0, mode: '', level: 1, solution: 0 };

    function navHome() {
        document.getElementById('scr-home').classList.remove('hidden');
        document.getElementById('scr-game').classList.add('hidden');
        document.body.className = 'theme-home';
    }

    function initGame(m) {
        gState.mode = m;
        gState.level = 1;
        document.getElementById('scr-home').classList.add('hidden');
        document.getElementById('scr-game').classList.remove('hidden');
        document.body.className = 'theme-' + m;
        buildProblem();
    }

    function press(v) {
        const inp = document.getElementById('ans-input');
        if(v === 'C') inp.value = '';
        else if(inp.value.length < 4) inp.value += v;
    }

    function buildProblem() {
        const pText = document.getElementById('problem-text');
        const lLabel = document.getElementById('level-label');
        document.getElementById('ans-input').value = '';
        document.getElementById('win-overlay').classList.add('hidden');

        let a, b;
        lLabel.innerText = `${gState.mode.toUpperCase()} - LEVEL ${gState.level}`;

        switch(gState.mode) {
            case 'addition':
                // Grade 3: 2-digit with carrying
                a = 15 + Math.floor(Math.random() * 40);
                b = 15 + Math.floor(Math.random() * 40);
                gState.solution = a + b;
                pText.innerText = `${a} + ${b}`;
                break;
            case 'subtraction':
                // Grade 3: 2-digit with borrowing
                a = 50 + Math.floor(Math.random() * 49);
                b = 15 + Math.floor(Math.random() * 30);
                gState.solution = a - b;
                pText.innerText = `${a} - ${b}`;
                break;
            case 'multiplication':
                // Grade 3: Multiplication tables 2-9
                a = 2 + Math.floor(Math.random() * 7);
                b = 3 + Math.floor(Math.random() * 7);
                gState.solution = a * b;
                pText.innerText = `${a} √ó ${b}`;
                break;
            case 'division':
                // Grade 3: Simple division (inverse of multiplication)
                b = 2 + Math.floor(Math.random() * 4);
                gState.solution = 2 + Math.floor(Math.random() * 5);
                a = b * gState.solution;
                pText.innerText = `${a} √∑ ${b}`;
                break;
        }
    }

    function verify() {
        const userVal = parseInt(document.getElementById('ans-input').value);
        if(userVal === gState.solution) {
            document.getElementById('win-overlay').classList.remove('hidden');
            gState.stars += (10 * gState.level);
            document.getElementById('star-val').innerText = gState.stars;
        } else {
            alert("Oops! Check your math and try again.");
            document.getElementById('ans-input').value = '';
        }
    }

    function nextLevel() {
        gState.level++;
        buildProblem();
    }
</script>
</body>
</html>
                document.getElementById('level-title').innerText = "Subtraction (Borrowing)"
