<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Hero Academy | Dashboard</title>
    <style>
        :root { --primary: #4CAF50; --secondary: #2196F3; --accent: #ff9800; --dark: #2c3e50; }
        body { font-family: 'Comic Sans MS', cursive; background: #f0faff; margin: 0; padding: 10px; }
        
        .main-container { display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; }
        
        /* Dashboard & Game */
        .game-area { flex: 2; min-width: 300px; background: white; border-radius: 30px; border: 6px solid var(--primary); padding: 20px; text-align: center; }
        
        /* Leaderboard Sidebar */
        .leaderboard { flex: 1; min-width: 250px; background: white; border-radius: 20px; border: 4px solid var(--accent); padding: 15px; height: fit-content; }
        .lb-row { display: flex; justify-content: space-between; padding: 8px; border-bottom: 1px solid #eee; }
        .lb-row.active { background: #fff9c4; font-weight: bold; }

        /* Teacher Admin Panel */
        .teacher-admin { width: 100%; max-width: 900px; margin: 40px auto; background: var(--dark); color: white; padding: 25px; border-radius: 20px; text-align: left; }
        .admin-btn { background: var(--secondary); color: white; border: none; padding: 10px 20px; border-radius: 10px; cursor: pointer; font-weight: bold; margin-right: 10px; }
        .whatsapp-btn { background: #25D366; }

        /* Existing Login & PIN styles from previous version... */
        #pin-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 1000; justify-content: center; align-items: center; }
        .pin-card { background: white; padding: 30px; border-radius: 20px; text-align: center; }
    </style>
</head>
<body>

    <div id="login-screen">
        </div>

    <div id="dashboard" style="display:none;">
        <div class="main-container">
            <div class="game-area">
                <h2 id="student-name-display">Hero: Aazam</h2>
                <div style="font-size: 2rem; color: var(--accent);">‚≠ê <span id="current-stars">0</span></div>
                <hr>
                <div id="math-arena">
                    <h3>Ready for today's challenge?</h3>
                    <button class="admin-btn" onclick="addDemoStars()">Add 10 Stars (Test)</button>
                </div>
            </div>

            <div class="leaderboard">
                <h3 style="color:var(--accent)">üèÜ Class Rankings</h3>
                <div id="leaderboard-list"></div>
            </div>
        </div>

        <div class="teacher-admin">
            <h3>üë®‚Äçüè´ Teacher Administration Panel</h3>
            <p>Download daily reports and share progress with parents.</p>
            <button class="admin-btn" onclick="downloadExcel()">üìä Download Excel Report</button>
            <button class="admin-btn whatsapp-btn" onclick="shareWhatsApp()">üì± Share on WhatsApp Group</button>
        </div>
    </div>

    <script>
        const studentNames = ["Aazam", "Priya", "Zayn", "Sofia", "Omar", "Maya", "Ken", "Elena", "Hassan", "Arjun"]; // Expand to 30
        let currentStudent = "";

        // Function to export Data to Excel (CSV)
        function downloadExcel() {
            let csvContent = "data:text/csv;charset=utf-8,Student Name,Stars Earned,Attempt Date\n";
            
            studentNames.forEach(name => {
                let stars = localStorage.getItem('stars_' + name) || 0;
                let date = new Date().toLocaleDateString();
                csvContent += `${name},${stars},${date}\n`;
            });

            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "Math_Hero_Report_" + new Date().toLocaleDateString() + ".csv");
            document.body.appendChild(link);
            link.click();
        }

        // Function to share via WhatsApp
        function shareWhatsApp() {
            let message = "*üåü Math Hero Academy - Daily Progress Report üåü*\n\n";
            studentNames.forEach(name => {
                let stars = localStorage.getItem('stars_' + name) || 0;
                if(stars > 0) message += `üë§ *${name}*: ${stars} Stars ‚úÖ\n`;
            });
            
            message += "\nGreat job today, heroes! üöÄ";
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        // Leaderboard logic
        function updateLeaderboard() {
            const list = document.getElementById('leaderboard-list');
            list.innerHTML = "";
            
            let data = studentNames.map(name => ({
                name: name,
                stars: parseInt(localStorage.getItem('stars_' + name)) || 0
            })).sort((a, b) => b.stars - a.stars);

            data.forEach((student, index) => {
                const row = document.createElement('div');
                row.className = `lb-row ${student.name === currentStudent ? 'active' : ''}`;
                row.innerHTML = `<span>${index + 1}. ${student.name}</span><span>${student.stars} ‚≠ê</span>`;
                list.appendChild(row);
            });
        }

        // Mock function for demo
        function addDemoStars() {
            let s = parseInt(localStorage.getItem('stars_' + currentStudent)) || 0;
            s += 10;
            localStorage.setItem('stars_' + currentStudent, s);
            document.getElementById('current-stars').innerText = s;
            updateLeaderboard();
        }

        // Set Aazam as default for demo purposes
        currentStudent = "Aazam";
        document.getElementById('dashboard').style.display = "block";
        updateLeaderboard();
    </script>
</body>
</html>
        
        updateUI();
        generateQuestion();
    </script>
</body>
</html>
                
