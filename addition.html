<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Math Adventure | PS Pethgam Wagoora</title>
    <style>
        :root { --primary: #ff4757; --success: #2ed573; --white: #ffffff; }
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%;
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #74ebd5 0%, #acb6e5 100%);
            overflow: hidden;
        }
        #app-container { display: flex; flex-direction: column; height: 100vh; }
        .hud {
            background: var(--white); padding: 15px 20px; display: flex;
            justify-content: space-between; align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); z-index: 100;
        }
        #game-zone {
            flex: 1; overflow-y: auto; display: flex; flex-direction: column;
            align-items: center; padding: 20px; padding-bottom: 150px;
        }
        .math-card {
            background: var(--white); width: 90%; max-width: 450px;
            padding: 30px; border-radius: 40px; text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15); border-bottom: 10px solid #dfe4ea;
        }
        #grade-label {
            display: inline-block; background: #ffa502; color: white;
            padding: 5px 20px; border-radius: 20px; font-size: 0.9rem; margin-bottom: 15px;
        }
        #visual-help {
            min-height: 80px; margin-bottom: 15px; padding: 15px;
            background: #f1f2f6; border-radius: 20px;
            display: flex; flex-wrap: wrap; justify-content: center; align-items: center;
            font-size: 1.5rem; gap: 8px;
        }
        .icon-unit { font-size: 2.2rem; filter: drop-shadow(2px 2px 0px rgba(0,0,0,0.1)); }
        #problem-display { font-size: 3.5rem; margin: 15px 0; color: #2f3542; }
        input[type=number] {
            width: 160px; height: 80px; font-size: 3rem; text-align: center;
            border: 4px solid var(--primary); border-radius: 20px; margin-bottom: 25px;
        }
        #submit-btn {
            width: 100%; padding: 20px; background: var(--success); color: white;
            border: none; border-radius: 20px; font-size: 1.6rem; font-weight: bold;
            box-shadow: 0 8px 0 #218c74; cursor: pointer;
        }
        .cracker-particle {
            position: fixed; width: 25px; height: 25px; border-radius: 50%;
            pointer-events: none; z-index: 999; left: 50%; top: 50%;
        }
    </style>
</head>
<body>

<div id="app-container">
    <div class="hud">
        <button onclick="window.history.back()" style="border:none; background:none; font-size:1.5rem;">üè†</button>
        <div style="font-weight:bold;">‚≠ê Stars: <span id="star-count">0</span></div>
    </div>

    <div id="game-zone">
        <div class="math-card">
            <div id="grade-label">Loading...</div>
            <div id="visual-help"></div>
            <h2 id="problem-display">? + ?</h2>
            <input type="number" id="answer-input" pattern="\d*" placeholder="?">
            <button id="submit-btn" onclick="processAnswer()">SUBMIT ‚úÖ</button>
        </div>
        <p style="color: white; margin-top: 20px; text-align: center;">Teacher: Mohammad Ashraf Rather<br>PS Pethgam Wagoora</p>
    </div>
</div>

<div id="cracker-container"></div>

<script>
    let currentIdx = 0;
    let stars = 0;
    const questions = [];

    // --- GENERATE 90 QUESTIONS (15 per Grade) ---
    function generateDatabase() {
        const icons = ['üçé', '‚≠êÔ∏è', 'üß∏', '‚öΩÔ∏è', 'üç¨', 'üçì', 'ü¶ã', 'üöó'];
        
        for (let i = 1; i <= 90; i++) {
            let n1, n2, grade, type = "text";
            let emoji = icons[Math.floor(Math.random() * icons.length)];

            if (i <= 15) { // NURSERY: 1-3 range, FULL Visual
                grade = "Nursery"; n1 = Math.ceil(Math.random() * 2); n2 = 1; type = "visual";
            } else if (i <= 30) { // LKG: 1-5 range, FULL Visual
                grade = "LKG"; n1 = Math.ceil(Math.random() * 3); n2 = Math.ceil(Math.random() * 2); type = "visual";
            } else if (i <= 45) { // UKG: 1-9 range, SEMI Visual (Objects + Numbers)
                grade = "UKG"; n1 = Math.ceil(Math.random() * 5); n2 = Math.ceil(Math.random() * 4); type = "semi";
            } else if (i <= 60) { // GRADE 1: 10-50, NO Visual (Words)
                grade = "Grade 1"; n1 = 10 + Math.floor(Math.random() * 30); n2 = Math.ceil(Math.random() * 9); type = "word";
            } else if (i <= 75) { // GRADE 2: 2-Digit Carrying, NO Visual
                grade = "Grade 2"; n1 = 20 + Math.floor(Math.random() * 40); n2 = 15 + Math.floor(Math.random() * 30); type = "pure";
            } else { // GRADE 3: 3-Digit Carrying, NO Visual
                grade = "Grade 3"; n1 = 100 + Math.floor(Math.random() * 400); n2 = 100 + Math.floor(Math.random() * 400); type = "pure";
            }

            questions.push({ n1, n2, a: n1 + n2, grade, type, emoji });
        }
    }

    function loadQ() {
        const q = questions[currentIdx];
        const help = document.getElementById('visual-help');
        const disp = document.getElementById('problem-display');
        document.getElementById('grade-label').innerText = q.grade + " (Q" + (currentIdx + 1) + "/90)";
        document.getElementById('answer-input').value = '';
        help.innerHTML = '';
        disp.innerText = `${q.n1} + ${q.n2}`;

        if (q.type === "visual") {
            disp.innerText = "?"; // Hide numbers for Nursery/LKG to force counting
            for(let i=0; i<q.n1; i++) help.innerHTML += `<span class="icon-unit">${q.emoji}</span>`;
            help.innerHTML += `<span style="font-size:2rem; margin:0 10px;">+</span>`;
            for(let i=0; i<q.n2; i++) help.innerHTML += `<span class="icon-unit">${q.emoji}</span>`;
        } 
        else if (q.type === "semi") {
            for(let i=0; i<q.n1; i++) help.innerHTML += q.emoji;
            help.innerHTML += " + " + q.n2;
        }
        else if (q.type === "word") {
            help.innerText = `${q.n1} items + ${q.n2} items`;
        }
        else {
            help.innerText = "Mental Calculation Mode";
        }
    }

    function processAnswer() {
        const val = parseInt(document.getElementById('answer-input').value);
        if (val === questions[currentIdx].a) {
            burst();
            stars += 10;
            document.getElementById('star-count').innerText = stars;
            currentIdx++;
            if (currentIdx < 90) setTimeout(loadQ, 2800);
            else alert("üéâ Graduation! You finished the 90-question journey!");
        } else {
            alert("Oops! Let's try again.");
            document.getElementById('answer-input').value = '';
        }
    }

    function burst() {
        const container = document.getElementById('cracker-container');
        for(let i=0; i<30; i++) {
            const p = document.createElement('div');
            p.className = 'cracker-particle';
            p.style.background = `hsl(${Math.random()*360}, 100%, 50%)`;
            p.style.transition = "all 2.5s cubic-bezier(0.1, 0.5, 0.5, 1)";
            container.appendChild(p);
            setTimeout(() => {
                const x = (Math.random()-0.5)*600, y = (Math.random()-0.5)*600;
                p.style.transform = `translate(${x}px, ${y}px) scale(0)`;
                p.style.opacity = "0";
            }, 50);
            setTimeout(() => p.remove(), 2600);
        }
    }

    generateDatabase();
    window.onload = loadQ;
</script>
</body>
</html>
        
