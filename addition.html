<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Math Adventure | PS Pethgam Wagoora</title>
    <style>
        :root { --primary: #ff4757; --success: #2ed573; --white: #ffffff; }
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%;
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #74ebd5 0%, #acb6e5 100%);
            overflow: hidden;
        }
        #app-container { display: flex; flex-direction: column; height: 100vh; }
        .hud {
            background: var(--white); padding: 15px 20px; display: flex;
            justify-content: space-between; align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); z-index: 100;
        }
        #game-zone {
            flex: 1; overflow-y: auto; display: flex; flex-direction: column;
            align-items: center; padding: 20px; padding-bottom: 160px; /* Space for keyboard */
        }
        .math-card {
            background: var(--white); width: 92%; max-width: 450px;
            padding: 30px; border-radius: 40px; text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15); border-bottom: 10px solid #dfe4ea;
        }
        #grade-label {
            display: inline-block; background: #ffa502; color: white;
            padding: 6px 22px; border-radius: 20px; font-size: 1rem; margin-bottom: 15px;
        }
        #visual-help {
            min-height: 100px; margin-bottom: 20px; padding: 15px;
            background: #f1f2f6; border-radius: 20px;
            display: flex; flex-wrap: wrap; justify-content: center; align-items: center;
            font-size: 1.4rem; gap: 8px; border: 2px dashed #ccc;
        }
        .icon-unit { font-size: 2.5rem; filter: drop-shadow(2px 2px 0px rgba(0,0,0,0.1)); }
        #problem-display { font-size: 3.8rem; margin: 15px 0; color: #2f3542; line-height: 1; }
        
        input[type=number] {
            width: 180px; height: 90px; font-size: 3.5rem; text-align: center;
            border: 5px solid var(--primary); border-radius: 20px; margin-bottom: 25px;
            background: #fff9fa;
        }
        #submit-btn {
            width: 100%; padding: 22px; background: var(--success); color: white;
            border: none; border-radius: 20px; font-size: 1.8rem; font-weight: bold;
            box-shadow: 0 8px 0 #218c74; cursor: pointer; transition: 0.1s;
        }
        #submit-btn:active { transform: translateY(4px); box-shadow: 0 4px 0 #218c74; }

        .cracker-particle {
            position: fixed; width: 25px; height: 25px; border-radius: 50%;
            pointer-events: none; z-index: 999; left: 50%; top: 50%;
        }
    </style>
</head>
<body>

<div id="app-container">
    <div class="hud">
        <button onclick="window.history.back()" style="border:none; background:none; font-size:1.8rem; cursor:pointer;">üè†</button>
        <div style="font-weight:bold; font-size: 1.2rem;">‚≠ê Stars: <span id="star-count">0</span></div>
    </div>

    <div id="game-zone">
        <div class="math-card">
            <div id="grade-label">Loading Adventure...</div>
            
            <div id="visual-help"></div>

            <h2 id="problem-display">? + ?</h2>

            <input type="number" id="answer-input" pattern="\d*" placeholder="?">

            <button id="submit-btn" onclick="processAnswer()">SUBMIT ‚úÖ</button>
        </div>
        
        <div style="color: white; margin-top: 30px; text-align: center; line-height: 1.6;">
            <strong>Mohammad Ashraf Rather</strong><br>
            Teacher, PS Pethgam Wagoora
        </div>
    </div>
</div>

<div id="cracker-container"></div>

<script>
    let currentIdx = 0;
    let stars = 0;
    const totalQuestions = 90;
    const questions = [];

    // --- AUTOMATIC DATABASE GENERATOR (90 QUESTIONS) ---
    function generate90Questions() {
        const icons = ['üçé', '‚≠êÔ∏è', 'üß∏', '‚öΩÔ∏è', 'üç¨', 'üçì', 'ü¶ã', 'üêü'];
        
        for (let i = 1; i <= totalQuestions; i++) {
            let n1, n2, grade, type, emoji = icons[Math.floor(Math.random() * icons.length)];

            if (i <= 15) { // NURSERY: Sums 2-4, PURE Visual
                grade = "Nursery"; n1 = Math.floor(Math.random() * 2) + 1; n2 = Math.floor(Math.random() * 2) + 1; type = "full-visual";
            } else if (i <= 30) { // LKG: Sums 2-10, PURE Visual
                grade = "LKG"; n1 = Math.floor(Math.random() * 5) + 1; n2 = Math.floor(Math.random() * 4) + 1; type = "full-visual";
            } else if (i <= 45) { // UKG: Single Digit, Semi-Visual (Icons + Numbers)
                grade = "UKG"; n1 = Math.floor(Math.random() * 7) + 2; n2 = Math.floor(Math.random() * 7) + 2; type = "semi-visual";
            } else if (i <= 60) { // GRADE 1: 2-Digit + 1-Digit (No Carry), Word Support
                grade = "Grade 1"; n1 = Math.floor(Math.random() * 20) + 10; n2 = Math.floor(Math.random() * 9) + 1; type = "word-scaffold";
            } else if (i <= 75) { // GRADE 2: 2-Digit + 2-Digit (With Carry), No Visual
                grade = "Grade 2"; n1 = Math.floor(Math.random() * 40) + 20; n2 = Math.floor(Math.random() * 40) + 15; type = "pure-math";
            } else { // GRADE 3: 3nd-Digit Addition, Carrying, No Visual
                grade = "Grade 3"; n1 = Math.floor(Math.random() * 400) + 100; n2 = Math.floor(Math.random() * 400) + 100; type = "pure-math";
            }

            questions.push({ n1, n2, a: n1 + n2, grade, type, emoji });
        }
    }

    function loadQuestion() {
        const q = questions[currentIdx];
        const helpBox = document.getElementById('visual-help');
        const display = document.getElementById('problem-display');
        const label = document.getElementById('grade-label');
        
        label.innerText = `${q.grade} | Question ${currentIdx + 1} of 90`;
        document.getElementById('answer-input').value = '';
        helpBox.innerHTML = '';

        // LOGIC: How to show the question based on Grade level
        if (q.type === "full-visual") {
            display.innerText = "?"; // Hide numbers for babies, make them count
            for(let i=0; i<q.n1; i++) helpBox.innerHTML += `<span class="icon-unit">${q.emoji}</span>`;
            helpBox.innerHTML += `<span style="font-size:2rem; margin:0 10px; font-weight:bold;">+</span>`;
            for(let i=0; i<q.n2; i++) helpBox.innerHTML += `<span class="icon-unit">${q.emoji}</span>`;
        } 
        else if (q.type === "semi-visual") {
            display.innerText = `${q.n1} + ${q.n2}`;
            helpBox.innerHTML = `<small>Count these:</small><br>`;
            for(let i=0; i< (q.n1 + q.n2); i++) helpBox.innerHTML += q.emoji;
        }
        else if (q.type === "word-scaffold") {
            display.innerText = `${q.n1} + ${q.n2}`;
            helpBox.innerHTML = `<em>"If you have ${q.n1} and get ${q.n2} more..."</em>`;
        }
        else {
            display.innerText = `${q.n1} + ${q.n2}`;
            helpBox.innerHTML = "<strong>Mental Math:</strong> Use place value columns!";
        }
    }

    function processAnswer() {
        const userInp = document.getElementById('answer-input').value;
        if (userInp === "") return;

        if (parseInt(userInp) === questions[currentIdx].a) {
            slowCelebration();
            stars += 10;
            document.getElementById('star-count').innerText = stars;
            currentIdx++;
            
            if (currentIdx < totalQuestions) {
                setTimeout(loadQuestion, 2800);
            } else {
                alert("üèÜ SPECTACULAR! You completed the entire 90-level journey!");
                window.location.reload();
            }
        } else {
            alert("Oops! Check your counting and try again.");
            document.getElementById('answer-input').value = '';
        }
    }

    function slowCelebration() {
        const container = document.getElementById('cracker-container');
        const colors = ['#ff4757', '#2ed573', '#ffa502', '#3742fa', '#ffffff', '#e84393'];

        for(let i=0; i<30; i++) {
            const dot = document.createElement('div');
            dot.className = 'cracker-particle';
            dot.style.background = colors[Math.floor(Math.random() * colors.length)];
            
            // SLOW ANIMATION SETTINGS
            dot.style.transition = "all 2.5s cubic-bezier(0.1, 0.5, 0.5, 1)";
            
            container.appendChild(dot);

            setTimeout(() => {
                const angle = Math.random() * Math.PI * 2;
                const dist = 150 + Math.random() * 350;
                const x = Math.cos(angle) * dist + "px";
                const y = Math.sin(angle) * dist + "px";
                dot.style.transform = `translate(${x}, ${y}) scale(0)`;
                dot.style.opacity = "0";
            }, 50);

            setTimeout(() => dot.remove(), 2600);
        }
    }

    // Initialize
    generate90Questions();
    window.onload = loadQuestion;
</script>

</body>
</html>
                            
